<div class="test-container">
  
  <!-- Progreso -->
  <div class="progress-bar">
    <div class="progress" [style.width.%]="getProgress()"></div>
  </div>

  <!-- Preguntas -->
  <div *ngIf="!testFinished">
    <h2>Test de inglés — Determina tu nivel A1–B2</h2>

    <div *ngFor="let q of questions; let i = index" class="question-box">
      <p><strong>{{ i+1 }}.</strong> {{ q.text }}</p>

      <label *ngFor="let opt of q.options" class="option">
        <input type="radio" name="q{{i}}" [(ngModel)]="q.selected" [value]="opt"> {{ opt }}
      </label>

      <p *ngIf="showExplanations && q.selected" class="explanation">
        <strong>Explicación:</strong> {{ q.explanation }}
      </p>
    </div>

    <button 
      class="btn" 
      [disabled]="!allQuestionsAnswered()" 
      (click)="submitTest()">
      Enviar respuestas
    </button>

    <button class="btn-secondary" (click)="toggleExplanations()">
      {{ showExplanations ? 'Ocultar explicaciones' : 'Mostrar explicaciones' }}
    </button>
  </div>

  <!-- RESULTADOS -->
  <div *ngIf="testFinished" class="results">

    <h2>Resultados del test</h2>

    <div class="result-card" [ngClass]="getLevelColor()">
      <h3>Tu nivel es: <strong>{{ level }}</strong></h3>
      <p>{{ score }} / {{ totalQuestions }} correctas</p>
    </div>

    <button class="btn" (click)="restart()">Reiniciar test</button>
  </div>

</div>
